<!-- <!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
</head>
<body>
<script>
function myFunction()
{
try   
   {
   var x=document.getElementById("demo").value;
   if(x=="")    throw "empty";
   if(isNaN(x)) throw "not a number";
   if (x>10)    throw "too high";
   if (x<5)     throw "too low";
   }
catch(err)
    {
    var y = document.getElementById("mess");
    y.innerHTML = "Error: " + err + ".";
    }
}
</script>
<h1>我的第一个 JavaScript 程序</h1>
<P>请输入5到10之间的数字：</p>
<input id="demo" type="text">
<button type="button" onclick="myFunction()">测试</button>
<p id="mess"></p>

</body>

</html> -->

<!-- <!DOCTYPE html>
<html>
<body>

<script>
function myFunction()
{
try
{ 
var x=document.getElementById("demo").value;
if(x=="")    throw "值为空";
if(isNaN(x)) throw "不是数字";
if(x>10)     throw "太大";
if(x<5)      throw "太小";
}
catch(err)
{
var y=document.getElementById("mess");
y.innerHTML="错误：" + err + "。";
}
}
</script>

<h1>我的第一个 JavaScript 程序</h1>
<p>请输入 5 到 10 之间的数字：</p>
<input id="demo" type="text">
<button type="button" onclick="myFunction()">测试输入值</button>
<p id="mess"></p>

</body>
</html> -->


<!-- <html>
<head>
<script type="text/javascript">

function validate_required(field,alerttxt)
{
with (field)
  {
  if (value==null||value=="")
    {alert(alerttxt);return false}
  else {return true}
  }
}

function validate_form(thisform)
{
with (thisform)
  {
  if (validate_required(email,"Email must be filled out!")==false)
    {email.focus();return false}
  }
}
</script>
</head>

<body>
<form action="submitpage.htm" onsubmit="return validate_form(this)" method="post">
Email: <input type="text" name="email" size="30">
<input type="submit" value="Submit"> 
</form>
</body>

</html> -->

<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">

<style type="text/css">
 .menu {
        position:relative;
        width:438px;
        z-index:2;
        background: #FFF;
        border:1px solid #000;
        margin-top:-20px;
        margin-left:20px;
        display:none;
        float:left;
    }
    .menu2 {
        position: absolute;
        left:0;
        top:0;
        width:100%;
        height:auto;
        overflow:hidden;
        z-index:1;
        float:left;
    }
    .Menu2 ul{margin:0;padding:0}
    .Menu2 ul li{
        width:100%;height:25px;line-height:25px;text-indent:15px;
        border-bottom:1px dashed #ccc;color:#666;cursor:pointer;
        float:left;    
    }
</style>

</head>

<body>
<div id="search">
    <input id="search_input" type="text" onclick="this.focus();this.value='';" onblur="showAndHide('hot_word','hide');"/> 
    <div id="search_button" onclick="search()"></div>
    <div class="menu" id="hot_word">
        <div class="menu2">
            <ul id="list"></ul>
        </div>
    </div>    
</div>

<script>
var hotWords = [{name:"value1"},{name:"value2"},{name:"value3"}];
var selectedLiId ; //被选中的li的id
var num = 9;       //下拉列表里可显示的li的最大数目

searchImmediately();
document.addEventListener("keydown",function(e){onKeyDown(e);},false);

function searchImmediately(){
        var element = document.getElementById("search_input");
        if("\v"=="v") {
              element.onpropertychange = inputChange;
        }else{
              element.addEventListener("input",inputChange,false);
        } 
         
        function inputChange(){
             if(element.value){                
                 showHotWord(element.value); //建立下拉列表，函数会在下面说明
             }           
        }          
　　 }

function showHotWord(str){ //建立下拉列表
        str = $.trim(str);//去空格
        var list = window.document.getElementById("list");
        list.innerHTML = "";       
        var index = 1;
        for(var i = 0;i < hotWords.length;i++){
            var name = hotWords[i].name ;
            if(name.toLowerCase().indexOf(str.toLowerCase()) < 0) continue;
            if(index > num) break; //超过num定义的最大li数目就终止打印li
            var child = document.createElement("li");
            child.id = "word_" + index; //为每条li设置id
            
            child.onmousedown = function() {//监听鼠标按下事件                                
　　　　　　　　　 selectedLiId = null;
                getValue('search_input',this);
                showAndHide('hot_word','hide');
            }   
            child.onmouseover=function(){//监听鼠标滑上事件    
                selectedLiId = this.id;
                this.style.background="#F2F5EF"; //鼠标滑上改变li的颜色
            }
            child.onmouseout=function(){//监听鼠标滑出事件    
                this.style.background="";//鼠标滑上改回li的颜色
            }
            
             child.innerHTML = name;
             list.appendChild(child);
             index++;
         }
        
        if(index == 1) { //没搜到相关的热词，不显示下拉列表
             showAndHide('hot_word','hide'); 
             eturn;
        }
        var wordDiv = window.document.getElementById("hot_word");
        wordDiv.style.height = (index-1)*26+5+"px" ; //设置列表的高     
        showAndHide('hot_word','show');        
   }
   
function showAndHide(obj,types){ //下拉列表的显示与隐藏
        var Layer=window.document.getElementById(obj);
        switch(types){
            case "show":
                Layer.style.display="block";
                break;
            case "hide":
                Layer.style.display="none";
                break;
        }
   }
   
function getValue(id,obj){ //输入框获取下拉列表中被选中的li的数据 显示在输入框中
     var input=window.document.getElementById(id); 
     var li = window.document.getElementById(obj.id).innerHTML;
     input.value=li;
     search(); 
}

function onKeyDown(e){ //键盘监听器
           if (!e)  e = window.event;
           var keycode = e.which ? e.which : e.keyCode; console.log(keycode);
           switch (keycode){    
              case 13://enter键
                   var li = window.document.getElementById(selectedLiId);
                   getValue('search_input',li);
                   showAndHide('hot_word','hide');
                   break;
               case 38://上键
                   previousLi(selectedLiId);
                   break;
               case 40://下键
                   nextLi(selectedLiId);
                   break;
           }
      }
    
function nextLi(id){ //下一条li
    if(id == null) id = "word_" + num;
    var strs = id.split('_');
    var idNum = parseInt(strs[1]);  
    if(idNum == num) {
        idNum = 1;
    } else idNum++;
    selectedLiId = "word_" + idNum;
    window.document.getElementById(id).style.background="";
    window.document.getElementById(selectedLiId).style.background="#F2F5EF";
}
    
function previousLi(id){ //上一条li
    if(id == null) id = "word_" + num;
    var strs = id.split('_');
    var idNum = parseInt(strs[1]);
    if(idNum == 1) {
        idNum = num;
    } else idNum--;
    selectedLiId = "word_" + idNum;console.log(selectedLiId);
    window.document.getElementById(id).style.background="";
    window.document.getElementById(selectedLiId).style.background="#F2F5EF";
}

</script>

</body>

</html>
